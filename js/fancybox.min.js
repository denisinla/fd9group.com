(function(e,t,n){var r=n(e),i=n(t),s=n.fancybox=function(){s.open.apply(this,arguments)},o=false,u=null,a=typeof t.createTouch!=="undefined";n.extend(s,{version:"2.0.5",defaults:{padding:0,margin:20,width:900,height:500,minWidth:100,minHeight:100,maxWidth:9999,maxHeight:9999,autoSize:false,autoResize:!a,autoCenter:!a,fitToView:true,aspectRatio:false,topRatio:.5,fixed:!(n.browser.msie&&n.browser.version<=6)&&!a,scrolling:"auto",wrapCSS:"fancybox-default",arrows:true,closeBtn:true,closeClick:false,nextClick:false,mouseWheel:true,autoPlay:false,playSpeed:3e3,preload:3,modal:false,loop:true,ajax:{dataType:"html",headers:{"X-fancyBox":true}},keys:{next:[13,32,34,39,40],prev:[8,33,37,38],close:[27]},index:0,type:null,href:null,content:null,title:null,tpl:{wrap:'<div class="fancybox-wrap"><div class="fancybox-outer"><div class="fancybox-inner"></div></div></div>',image:'<img class="fancybox-image" src="{href}" alt="" />',iframe:'<iframe class="fancybox-iframe" name="fancybox-frame{rnd}" frameborder="0" hspace="0"'+(n.browser.msie?' allowtransparency="true"':"")+"></iframe>",swf:'<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="wmode" value="transparent" /><param name="allowfullscreen" value="true" /><param name="allowscriptaccess" value="always" /><param name="movie" value="{href}" /><embed src="{href}" type="application/x-shockwave-flash" allowfullscreen="true" allowscriptaccess="always" width="100%" height="100%" wmode="transparent"></embed></object>',error:'<p class="fancybox-error">The requested content cannot be loaded.<br/>Please try again later.</p>',closeBtn:'<div title="Close" class="fancybox-item fancybox-close"></div>',next:'<a title="Next" class="fancybox-nav fancybox-next"><span></span></a>',prev:'<a title="Previous" class="fancybox-nav fancybox-prev"><span></span></a>'},openEffect:"fade",openSpeed:250,openEasing:"swing",openOpacity:true,openMethod:"zoomIn",closeEffect:"fade",closeSpeed:250,closeEasing:"swing",closeOpacity:true,closeMethod:"zoomOut",nextEffect:"elastic",nextSpeed:300,nextEasing:"swing",nextMethod:"changeIn",prevEffect:"elastic",prevSpeed:300,prevEasing:"swing",prevMethod:"changeOut",helpers:{overlay:{speedIn:0,speedOut:300,opacity:.8,css:{cursor:"pointer"},closeClick:true},title:{type:"float"}},onCancel:n.noop,beforeLoad:n.noop,afterLoad:n.noop,beforeShow:n.noop,afterShow:n.noop,beforeClose:n.noop,afterClose:n.noop},group:{},opts:{},coming:null,current:null,isOpen:false,isOpened:false,wrap:null,outer:null,inner:null,player:{timer:null,isActive:false},ajaxLoad:null,imgPreload:null,transitions:{},helpers:{},open:function(e,t){s.close(true);if(e&&!n.isArray(e)){e=e instanceof n?n(e).get():[e]}s.isActive=true;s.opts=n.extend(true,{},s.defaults,t);if(n.isPlainObject(t)&&typeof t.keys!=="undefined"){s.opts.keys=t.keys?n.extend({},s.defaults.keys,t.keys):false}s.group=e;s._start(s.opts.index||0)},cancel:function(){if(s.coming&&false===s.trigger("onCancel")){return}s.coming=null;s.hideLoading();if(s.ajaxLoad){s.ajaxLoad.abort()}s.ajaxLoad=null;if(s.imgPreload){s.imgPreload.onload=s.imgPreload.onabort=s.imgPreload.onerror=null}},close:function(e){s.cancel();if(!s.current||false===s.trigger("beforeClose")){return}s.unbindEvents();if(!s.isOpen||e&&e[0]===true){n(".fancybox-wrap").stop().trigger("onReset").remove();s._afterZoomOut()}else{s.isOpen=s.isOpened=false;n(".fancybox-item, .fancybox-nav").remove();s.wrap.stop(true).removeClass("fancybox-opened");s.inner.css("overflow","hidden");s.transitions[s.current.closeMethod]()}},play:function(e){var t=function(){clearTimeout(s.player.timer)},r=function(){t();if(s.current&&s.player.isActive){s.player.timer=setTimeout(s.next,s.current.playSpeed)}},i=function(){t();n("body").unbind(".player");s.player.isActive=false;s.trigger("onPlayEnd")},o=function(){if(s.current&&(s.current.loop||s.current.index<s.group.length-1)){s.player.isActive=true;n("body").bind({"afterShow.player onUpdate.player":r,"onCancel.player beforeClose.player":i,"beforeLoad.player":t});r();s.trigger("onPlayStart")}};if(s.player.isActive||e&&e[0]===false){i()}else{o()}},next:function(){if(s.current){s.jumpto(s.current.index+1)}},prev:function(){if(s.current){s.jumpto(s.current.index-1)}},jumpto:function(e){if(!s.current){return}e=parseInt(e,10);if(s.group.length>1&&s.current.loop){if(e>=s.group.length){e=0}else if(e<0){e=s.group.length-1}}if(typeof s.group[e]!=="undefined"){s.cancel();s._start(e)}},reposition:function(e){if(s.isOpen){s.wrap.css(s._getPosition(e))}},update:function(e){if(s.isOpen){if(!o){u=setTimeout(function(){var t=s.current;if(o){o=false;if(t){if(t.autoResize||e&&e.type==="orientationchange"){if(t.autoSize){s.inner.height("auto");t.height=s.inner.height()}s._setDimension();if(t.canGrow){s.inner.height("auto")}}if(t.autoCenter){s.reposition()}s.trigger("onUpdate")}}},100)}o=true}},toggle:function(){if(s.isOpen){s.current.fitToView=!s.current.fitToView;s.update()}},hideLoading:function(){n("#fancybox-loading").remove()},showLoading:function(){s.hideLoading();n('<div id="fancybox-loading"><div></div></div>').click(s.cancel).appendTo("body")},getViewport:function(){return{x:r.scrollLeft(),y:r.scrollTop(),w:r.width(),h:r.height()}},unbindEvents:function(){if(s.wrap){s.wrap.unbind(".fb")}i.unbind(".fb");r.unbind(".fb")},bindEvents:function(){var e=s.current,t=e.keys;if(!e){return}r.bind("resize.fb, orientationchange.fb",s.update);if(t){i.bind("keydown.fb",function(e){var r;if(!e.ctrlKey&&!e.altKey&&!e.shiftKey&&!e.metaKey&&n.inArray(e.target.tagName.toLowerCase(),["input","textarea","select","button"])<0){r=e.keyCode;if(n.inArray(r,t.close)>-1){s.close();e.preventDefault()}else if(n.inArray(r,t.next)>-1){s.next();e.preventDefault()}else if(n.inArray(r,t.prev)>-1){s.prev();e.preventDefault()}}})}if(n.fn.mousewheel&&e.mouseWheel&&s.group.length>1){s.wrap.bind("mousewheel.fb",function(e,t){var r=n(e.target).get(0);if(r.clientHeight===0||r.scrollHeight===r.clientHeight&&r.scrollWidth===r.clientWidth){e.preventDefault();s[t>0?"prev":"next"]()}})}},trigger:function(e){var t,r=s[n.inArray(e,["onCancel","beforeLoad","afterLoad"])>-1?"coming":"current"];if(!r){return}if(n.isFunction(r[e])){t=r[e].apply(r,Array.prototype.slice.call(arguments,1))}if(t===false){return false}if(r.helpers){n.each(r.helpers,function(t,i){if(i&&typeof s.helpers[t]!=="undefined"&&n.isFunction(s.helpers[t][e])){s.helpers[t][e](i,r)}})}n.event.trigger(e+".fb")},isImage:function(e){return e&&e.match(/\.(jpg|gif|png|bmp|jpeg)(.*)?$/i)},isSWF:function(e){return e&&e.match(/\.(swf)(.*)?$/i)},_start:function(e){var t={},r=s.group[e]||null,i,o,u,a;if(r&&(r.nodeType||r instanceof n)){i=true;if(n.metadata){t=n(r).metadata()}}t=n.extend(true,{},s.opts,{index:e,element:r},n.isPlainObject(r)?r:t);n.each(["href","title","content","type"],function(e,o){t[o]=s.opts[o]||i&&n(r).attr(o)||t[o]||null});if(typeof t.margin==="number"){t.margin=[t.margin,t.margin,t.margin,t.margin]}if(t.modal){n.extend(true,t,{closeBtn:false,closeClick:false,nextClick:false,arrows:false,mouseWheel:false,keys:null,helpers:{overlay:{css:{cursor:"auto"},closeClick:false}}})}s.coming=t;if(false===s.trigger("beforeLoad")){s.coming=null;return}u=t.type;o=t.href||r;if(!u){if(i){a=n(r).data("fancybox-type");if(!a&&r.className){a=r.className.match(/fancybox\.(\w+)/);u=a?a[1]:null}}if(!u&&n.type(o)==="string"){if(s.isImage(o)){u="image"}else if(s.isSWF(o)){u="swf"}else if(o.match(/^#/)){u="inline"}}if(!u){u=i?"inline":"html"}t.type=u}if(u==="inline"||u==="html"){if(!t.content){if(u==="inline"){t.content=n(n.type(o)==="string"?o.replace(/.*(?=#[^\s]+$)/,""):o)}else{t.content=r}}if(!t.content||!t.content.length){u=null}}else if(!o){u=null}t.group=s.group;t.isDom=i;t.href=o;if(u==="image"){s._loadImage()}else if(u==="ajax"){s._loadAjax()}else if(u){s._afterLoad()}else{s._error("type")}},_error:function(e){s.hideLoading();n.extend(s.coming,{type:"html",autoSize:true,minHeight:0,hasError:e,content:s.coming.tpl.error});s._afterLoad()},_loadImage:function(){s.imgPreload=new Image;s.imgPreload.onload=function(){this.onload=this.onerror=null;s.coming.width=this.width;s.coming.height=this.height;s._afterLoad()};s.imgPreload.onerror=function(){this.onload=this.onerror=null;s._error("image")};s.imgPreload.src=s.coming.href;if(!s.imgPreload.width){s.showLoading()}},_loadAjax:function(){s.showLoading();s.ajaxLoad=n.ajax(n.extend({},s.coming.ajax,{url:s.coming.href,error:function(e,t){if(t!=="abort"){s._error("ajax",e)}else{s.hideLoading()}},success:function(e,t){if(t==="success"){s.coming.content=e;s._afterLoad()}}}))},_preloadImages:function(){var e=s.group,t=s.current,r=e.length,i,o;if(!t.preload||e.length<2){return}for(var u=1;u<=Math.min(t.preload,r-1);u++){i=e[(t.index+u)%r];o=n(i).attr("href")||i;if(o){(new Image).src=o}}},_afterLoad:function(){s.hideLoading();if(!s.coming||false===s.trigger("afterLoad",s.current)){s.coming=false;return}if(s.isOpened){n(".fancybox-item").remove();s.wrap.stop(true).removeClass("fancybox-opened");s.inner.css("overflow","hidden");s.transitions[s.current.prevMethod]()}else{n(".fancybox-wrap").stop().trigger("onReset").remove();s.trigger("afterClose")}s.unbindEvents();s.isOpen=false;s.current=s.coming;s.wrap=n(s.current.tpl.wrap).addClass("fancybox-"+(a?"mobile":"desktop")+" fancybox-tmp "+s.current.wrapCSS).appendTo("body");s.outer=n(".fancybox-outer",s.wrap).css("padding",s.current.padding+"px");s.inner=n(".fancybox-inner",s.wrap);s._setContent()},_setContent:function(){var e,t,r,i=s.current,o=i.type;switch(o){case"inline":case"ajax":case"html":e=i.content;if(e instanceof n){e=e.show().detach();if(e.parent().hasClass("fancybox-inner")){e.parents(".fancybox-wrap").trigger("onReset").remove()}n(s.wrap).bind("onReset",function(){e.appendTo("body").hide()})}if(i.autoSize){t=n('<div class="fancybox-tmp '+s.current.wrapCSS+'"></div>').appendTo("body").append(e);i.width=t.width();i.height=t.height();t.width(s.current.width);if(t.height()>i.height){t.width(i.width+1);i.width=t.width();i.height=t.height()}e=t.contents().detach();t.remove()}break;case"image":e=i.tpl.image.replace("{href}",i.href);i.aspectRatio=true;break;case"swf":e=i.tpl.swf.replace(/\{width\}/g,i.width).replace(/\{height\}/g,i.height).replace(/\{href\}/g,i.href);break}if(o==="iframe"){e=n(i.tpl.iframe.replace("{rnd}",(new Date).getTime())).attr("scrolling",i.scrolling);i.scrolling="auto";if(i.autoSize){e.width(i.width);s.showLoading();e.data("ready",false).appendTo(s.inner).bind({onCancel:function(){n(this).unbind();s._afterZoomOut()},load:function(){var e=n(this),t;try{if(this.contentWindow.document.location){t=e.contents().find("body").height()+12;e.height(t)}}catch(r){i.autoSize=false}if(e.data("ready")===false){s.hideLoading();if(t){s.current.height=t}s._beforeShow();e.data("ready",true)}else if(t){s.update()}}}).attr("src",i.href);return}else{e.attr("src",i.href)}}else if(o==="image"||o==="swf"){i.autoSize=false;i.scrolling="visible"}s.inner.append(e);s._beforeShow()},_beforeShow:function(){s.coming=null;s.trigger("beforeShow");s._setDimension();s.wrap.hide().removeClass("fancybox-tmp");s.bindEvents();s._preloadImages();s.transitions[s.isOpened?s.current.nextMethod:s.current.openMethod]()},_setDimension:function(){var e=s.wrap,t=s.outer,r=s.inner,i=s.current,o=s.getViewport(),u=i.margin,a=i.padding*2,f=i.width,l=i.height,c=i.maxWidth,h=i.maxHeight,p=i.minWidth,d=i.minHeight,v,m,g;o.w-=u[1]+u[3];o.h-=u[0]+u[2];if(f.toString().indexOf("%")>-1){f=(o.w-a)*parseFloat(f)/100}if(l.toString().indexOf("%")>-1){l=(o.h-a)*parseFloat(l)/100}v=f/l;f+=a;l+=a;if(i.fitToView){c=Math.min(o.w,c);h=Math.min(o.h,h)}if(i.aspectRatio){if(f>c){f=c;l=(f-a)/v+a}if(l>h){l=h;f=(l-a)*v+a}if(f<p){f=p;l=(f-a)/v+a}if(l<d){l=d;f=(l-a)*v+a}}else{f=Math.max(p,Math.min(f,c));l=Math.max(d,Math.min(l,h))}f=Math.round(f);l=Math.round(l);n(e.add(t).add(r)).width("auto").height("auto");r.width(f-a).height(l-a);e.width(f);m=e.height();if(f>c||m>h){while((f>c||m>h)&&f>p&&m>d){l=l-10;if(i.aspectRatio){f=Math.round((l-a)*v+a);if(f<p){f=p;l=(f-a)/v+a}}else{f=f-10}r.width(f-a).height(l-a);e.width(f);m=e.height()}}i.dim={width:f,height:m};i.canGrow=i.autoSize&&l>d&&l<h;i.canShrink=false;i.canExpand=false;if(f-a<i.width||l-a<i.height){i.canExpand=true}else if((f>o.w||m>o.h)&&f>p&&l>d){i.canShrink=true}g=m-a;s.innerSpace=g-r.height();s.outerSpace=g-t.height()},_getPosition:function(e){var t=s.current,n=s.getViewport(),r=t.margin,i=s.wrap.width()+r[1]+r[3],o=s.wrap.height()+r[0]+r[2],u={position:"absolute",top:r[0]+n.y,left:r[3]+n.x};if(t.fixed&&(!e||e[0]===false)&&o<=n.h&&i<=n.w){u={position:"fixed",top:r[0],left:r[3]}}u.top=Math.ceil(Math.max(u.top,u.top+(n.h-o)*t.topRatio))+"px";u.left=Math.ceil(Math.max(u.left,u.left+(n.w-i)*.5))+"px";return u},_afterZoomIn:function(){var e=s.current,t=e.scrolling;s.isOpen=s.isOpened=true;s.wrap.addClass("fancybox-opened").css("overflow","visible");s.update();s.inner.css("overflow",t==="yes"?"scroll":t==="no"?"hidden":t);if(e.closeClick||e.nextClick){s.inner.css("cursor","pointer").bind("click.fb",e.nextClick?s.next:s.close)}if(e.closeBtn){n(e.tpl.closeBtn).appendTo(s.outer).bind("click.fb",s.close)}if(e.arrows&&s.group.length>1){if(e.loop||e.index>0){n(e.tpl.prev).appendTo(s.inner).bind("click.fb",s.prev)}if(e.loop||e.index<s.group.length-1){n(e.tpl.next).appendTo(s.inner).bind("click.fb",s.next)}}s.trigger("afterShow");if(s.opts.autoPlay&&!s.player.isActive){s.opts.autoPlay=false;s.play()}},_afterZoomOut:function(){s.trigger("afterClose");s.wrap.trigger("onReset").remove();n.extend(s,{group:{},opts:{},current:null,isActive:false,isOpened:false,isOpen:false,wrap:null,outer:null,inner:null})}});s.transitions={getOrigPosition:function(){var e=s.current,t=e.element,r=e.padding,i=n(e.orig),o={},u=50,a=50,f;if(!i.length&&e.isDom&&n(t).is(":visible")){i=n(t).find("img:first");if(!i.length){i=n(t)}}if(i.length){o=i.offset();if(i.is("img")){u=i.outerWidth();a=i.outerHeight()}}else{f=s.getViewport();o.top=f.y+(f.h-a)*.5;o.left=f.x+(f.w-u)*.5}o={top:Math.ceil(o.top-r)+"px",left:Math.ceil(o.left-r)+"px",width:Math.ceil(u+r*2)+"px",height:Math.ceil(a+r*2)+"px"};return o},step:function(e,t){var n,r,i;if(t.prop==="width"||t.prop==="height"){r=i=Math.ceil(e-s.current.padding*2);if(t.prop==="height"){n=(e-t.start)/(t.end-t.start);if(t.start>t.end){n=1-n}r-=s.innerSpace*n;i-=s.outerSpace*n}s.inner[t.prop](r);s.outer[t.prop](i)}},zoomIn:function(){var e=s.wrap,t=s.current,r,i,o=t.dim;if(t.openEffect==="elastic"){i=n.extend({},o,s._getPosition(true));delete i.position;r=this.getOrigPosition();if(t.openOpacity){r.opacity=0;i.opacity=1}s.outer.add(s.inner).width("auto").height("auto");e.css(r).show();e.animate(i,{duration:t.openSpeed,easing:t.openEasing,step:this.step,complete:s._afterZoomIn})}else{e.css(n.extend({},o,s._getPosition()));if(t.openEffect==="fade"){e.fadeIn(t.openSpeed,s._afterZoomIn)}else{e.show();s._afterZoomIn()}}},zoomOut:function(){var e=s.wrap,t=s.current,n;if(t.closeEffect==="elastic"){if(e.css("position")==="fixed"){e.css(s._getPosition(true))}n=this.getOrigPosition();if(t.closeOpacity){n.opacity=0}e.animate(n,{duration:t.closeSpeed,easing:t.closeEasing,step:this.step,complete:s._afterZoomOut})}else{e.fadeOut(t.closeEffect==="fade"?t.closeSpeed:0,s._afterZoomOut)}},changeIn:function(){var e=s.wrap,t=s.current,n;if(t.nextEffect==="elastic"){n=s._getPosition(true);n.opacity=0;n.top=parseInt(n.top,10)-200+"px";e.css(n).show().animate({opacity:1,top:"+=200px"},{duration:t.nextSpeed,easing:t.nextEasing,complete:s._afterZoomIn})}else{e.css(s._getPosition());if(t.nextEffect==="fade"){e.hide().fadeIn(t.nextSpeed,s._afterZoomIn)}else{e.show();s._afterZoomIn()}}},changeOut:function(){var e=s.wrap,t=s.current,r=function(){n(this).trigger("onReset").remove()};e.removeClass("fancybox-opened");if(t.prevEffect==="elastic"){e.animate({opacity:0,top:"+=200px"},{duration:t.prevSpeed,easing:t.prevEasing,complete:r})}else{e.fadeOut(t.prevEffect==="fade"?t.prevSpeed:0,r)}}};s.helpers.overlay={overlay:null,update:function(){var e,s,o;if(n.browser.msie){s=Math.max(t.documentElement.scrollWidth,t.body.scrollWidth);o=Math.max(t.documentElement.offsetWidth,t.body.offsetWidth);e=s<o?r.width():s}else{e=i.width()}this.overlay.width(e).height(i.height())},beforeShow:function(e){if(this.overlay){return}e=n.extend(true,{speedIn:"fast",closeClick:true,opacity:1,css:{background:"black"}},e);this.overlay=n('<div id="fancybox-overlay"></div>').css(e.css).appendTo("body");this.update();if(e.closeClick){this.overlay.bind("click.fb",s.close)}r.bind("resize.fb",n.proxy(this.update,this));this.overlay.fadeTo(e.speedIn,e.opacity)},onUpdate:function(){this.update()},afterClose:function(e){if(this.overlay){this.overlay.fadeOut(e.speedOut||0,function(){n(this).remove()})}this.overlay=null}};s.helpers.title={beforeShow:function(e){var t,r=s.current.title;if(r){t=n('<div class="fancybox-title fancybox-title-'+e.type+'-wrap">'+r+"</div>").appendTo("body");if(e.type==="float"){t.width(t.width());t.wrapInner('<span class="child"></span>');s.current.margin[2]+=Math.abs(parseInt(t.css("margin-bottom"),10))}t.appendTo(e.type==="over"?s.inner:e.type==="outside"?s.wrap:s.outer)}}};n.fn.fancybox=function(e){var t=n(this),r=this.selector||"",o,u=function(i){var u=this,a="rel",f=u[a],l=o;if(!(i.ctrlKey||i.altKey||i.shiftKey||i.metaKey)){i.preventDefault();if(!f){a="data-fancybox-group";f=n(u).attr("data-fancybox-group")}if(f&&f!==""&&f!=="nofollow"){u=r.length?n(r):t;u=u.filter("["+a+'="'+f+'"]');l=u.index(this)}e.index=l;s.open(u,e)}};e=e||{};o=e.index||0;if(r){i.undelegate(r,"click.fb-start").delegate(r,"click.fb-start",u)}else{t.unbind("click.fb-start").bind("click.fb-start",u)}return this}})(window,document,jQuery)